<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

	
		
	</head>
	<body>
		<script>
			// Defines the custom element with our appropriate name, <apocalyptic-warning>
async function queryGPT (context, input, output) {
	const messages = [];
	if(context) messages.push({"role": "system", "content": context})
	if(input) messages.push({"role": "user", "content": input})
	const response = await fetch('https://api.openai.com/v1/chat/completions', {
		method: "POST",
		headers: {
			"Content-Type": "application/json",
			"Authorization": "Bearer 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"
		},
		body: JSON.stringify({
			"model": "gpt-3.5-turbo",
			"temperature": 0.7,
			"max_tokens": 2000,
			"messages":messages
		})
	});
	const data = await response.json();
	const outputData = data.choices[0].message.content;
	console.log(outputData);
	if(output) output.value = outputData;
	return data;
}

				customElements.define("gpt-input",

 
// Ensures that we have all the default properties and methods of a built in HTML element
class extends HTMLElement {

  // Called anytime a new custom element is created
  constructor() {

	// Calls the parent constructor, i.e. the constructor for `HTMLElement`, so that everything is set up exactly as we would for creating a built in HTML element
	super();

	// Grabs the <template> and stores it in `warning`
	let rawTemplate = document.getElementById("GPT");

	// Stores the contents of the template in `mywarning`
	let myTemplate = rawTemplate.content;

	const shadowRoot = this.attachShadow({mode: "open"}).appendChild(myTemplate.cloneNode(true));
	console.log("constructed");
    this.sendGPT = this.sendGPT.bind(this);
    
  }
  sendGPT() {
    const { shadowRoot } = this;
    const contextValue = shadowRoot.querySelector('.context').assignedNodes()[0].innerText;
    const inputValue = shadowRoot.querySelector('.input').value;
    const output = shadowRoot.querySelector('.output');
    console.log("sendGPT", contextValue, inputValue, output);
    queryGPT(contextValue, inputValue, output);
  }
  connectedCallback() {
    const { shadowRoot } = this;
    const button = shadowRoot.querySelector('button');
    
    button.addEventListener('click', this.sendGPT);

	
  }
});
		</script>
		
		
		<template id="GPT">
			<h3>Context</h3>
			<p><slot class="context" name="context">Example</slot></p>
			<h3>Input</h3>
			<textarea placeholder="your input" class="input">
			</textarea>
			<button>go</button>
			<h3>Output</h3>
			<textarea class="output">
			</textarea>
		</template>

		<div class="reveal">
			<div class="slides">
				<section data-state="intro">
					<section>
						<h2>Adam Hall</h2>
						<gpt-input>
							<span slot="context">I want you to respond as if you are the joker. How would the joker intervene in the way twitter is managed?</span>
						</gpt-input>
                        <gpt-input>
							<span slot="context">I want you to respond as if you are the Hanibal Lecter. How would the Hanibal Lecter intervene in the way twitter is managed?</span>
						</gpt-input>
					</section>
					<section>
						Former Agile Coach
					</section>
					<section>
						Technophile
					</section>
					<aside class="notes">
						This is where you introduce yourself üìù
						Maybe say about upskilling
						Yes you work for AND
						Passion to automate all the things
					</aside>
				</section>
				<section data-background="salmon">
					<h1>Example</h1>
					<p>This is an example Joker bot. Ask the joker anything....</p>
					<textarea placeholder="What do you want to ask?" id="joker-input">
					</textarea>
					<button onclick="javascript:queryGPT('You are the joker', document.getElementById('joker-input').value, document.getElementById('joker-output'))">go</button>

					<textarea id="joker-output">
					</textarea>
				</section>
				
				<section  data-state="access" data-markdown="chapter1.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"></section>
				
				<section data-background="salmon">
					<h2>You can even use it to write code</h2>
					<iframe data-src="https://www.linkedin.com/embed/feed/update/urn:li:ugcPost:6935628727208837120" height="656" width="504" frameborder="0" allowfullscreen="" title="Embedded post"></iframe>
				</section>
				<section>
					<h2>A jira app</h2>
					<iframe data-src="https://www.linkedin.com/embed/feed/update/urn:li:ugcPost:6798019175789944833" height="719" width="504" frameborder="0" allowfullscreen="" title="Embedded post"></iframe>

				</section>
				<section>
					<h2>Give your AI personality</h2>
					<audio data-src="assets/joker.mp3?a" controls></audio>
				</section>
			</div>
		</div>
	</body>
</html>
